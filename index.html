<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Travel Agency</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="" name="keywords" />
    <meta content="" name="description" />

    <link rel="stylesheet" href="assets/css/spapp.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.css"
    />

    <!-- Favicon -->
    <!-- <link href="assets/img/favicon.ico" rel="icon" /> -->

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&family=Roboto:wght@500;700&display=swap"
      rel="stylesheet"
    />

    <!-- Icon Font Stylesheet -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Libraries Stylesheet -->
    <link href="assets/lib/animate/animate.min.css" rel="stylesheet" />
    <link
      href="assets/lib/owlcarousel/assets/owl.carousel.min.css"
      rel="stylesheet"
    />
    <link href="assets/lib/lightbox/css/lightbox.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <!-- <link href="assets/css/bootstrap.min.css" rel="stylesheet" /> -->
    <link rel="stylesheet" href="assets/css/global.css" />

    <!-- Template Stylesheet -->
    <link href="assets/css/style.css" rel="stylesheet" />

    <script src="assets/js/user-service.js"></script>
    <script src="assets/js/trip-service.js"></script>
    \
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.js"></script>
    <script src="assets/js/jquery.spapp.js"></script>
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/utils.js"></script>
  </head>

  <body>
    <!-- Spinner Start -->
    <div
      id="spinner"
      class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center"
    >
      <div
        class="spinner-border text-primary"
        role="status"
        style="width: 3rem; height: 3rem"
      ></div>
    </div>
    <!-- Spinner End -->

    <!-- Topbar Start -->
    <div class="container-fluid bg-primary text-white d-none d-lg-flex">
      <div class="container py-3">
        <div class="d-flex align-items-center">
          <a href="index.html">
            <h2 class="text-white fw-bold m-0">Journey</h2>
          </a>
          <div class="ms-auto d-flex align-items-center">
            <small class="ms-4"
              ><i class="fa fa-map-marker-alt me-3"></i>Francuske revolucije bb,
              BiH</small
            >
            <small class="ms-4"
              ><i class="fa fa-envelope me-3"></i>info@journey.com</small
            >
            <small class="ms-4"
              ><i class="fa fa-phone-alt me-3"></i>+387 33 111 111</small
            >
            <div class="ms-3 d-flex">
              <a
                class="btn btn-sm-square btn-light text-primary rounded-circle ms-2"
                href=""
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a
                class="btn btn-sm-square btn-light text-primary rounded-circle ms-2"
                href=""
                ><i class="fab fa-instagram"></i
              ></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <div class="container-fluid bg-white sticky-top">
      <div class="container">
        <nav class="navbar navbar-expand-lg bg-white navbar-light p-lg-0">
          <a href="index.html" class="navbar-brand d-lg-none">
            <h1 class="fw-bold m-0">Journey</h1>
          </a>
          <button
            type="button"
            class="navbar-toggler me-0"
            data-bs-toggle="collapse"
            data-bs-target="#navbarCollapse"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav">
              <a href="#home" class="nav-item nav-link active">Home</a>
              <a href="#about" class="nav-item nav-link">About</a>
              <a href="#trips" class="nav-item nav-link">Trips</a>
              <a href="#contact" class="nav-item nav-link">Contact</a>
              <a
                href="#wishlist"
                id="wishlist-nav-item"
                class="nav-item nav-link d-none"
                >Wishlist</a
              >
            </div>
            <div class="ms-auto d-none d-lg-block">
              <div id="authDiv">
                <a
                  href="#login"
                  class="btn btn-primary rounded-pill py-2 px-3 me-4"
                  >Log in</a
                >
                <a href="#register">Register</a>
              </div>
              <div id="userDropdown" class="dropdown d-none">
                <a
                  href="#"
                  id="userDropdownButton"
                  class="dropdown-toggle"
                  data-bs-toggle="dropdown"
                  >User</a
                >
                <div
                  class="dropdown-menu bg-light rounded-0 rounded-bottom m-0 dropdown-menu-end"
                  aria-labelledby="userDropdownButton"
                >
                  <a onclick="UserService.logout()" class="dropdown-item"
                    >Logout</a
                  >
                </div>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </div>
    <!-- Navbar End -->

    <!-- Sections for SPA -->
    <main id="spapp" role="main">
      <section id="view_2"></section>
      <section id="error_404"><h1>Page not found</h1></section>
      <section id="login"></section>
      <section id="register"></section>
      <section id="about"></section>
      <section id="trips"></section>
      <section id="contact"></section>
      <section id="trip-details"></section>
      <section id="wishlist"></section>
      <!-- default section on the last place -->
      <section id="home"></section>
    </main>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/lib/wow/wow.min.js"></script>
    <script src="assets/lib/easing/easing.min.js"></script>
    <script src="assets/lib/waypoints/waypoints.min.js"></script>
    <script src="assets/lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="assets/lib/lightbox/js/lightbox.min.js"></script>

    <!-- Template Javascript -->
    <script src="assets/js/main.js"></script>

    <script>
      // Check if JWT token exists in local storage
      const jwtToken = localStorage.getItem("jwt_token");

      // Get the elements by their IDs
      const authDiv = $("#authDiv");
      const userDropdown = $("#userDropdown");
      const userDropdownButton = $("#userDropdownButton");
      const wishlistNavItem = $("#wishlist-nav-item");


      // Check if JWT token exists
      if (jwtToken) {
        try {
          var user = Utils.parseJwt(jwtToken);
          const username = user.username;
          console.log(user);

          // Set the user's name in the dropdown button
          userDropdownButton.text(username);
          userDropdown.removeClass("d-none");
          authDiv.addClass("d-none");
          wishlistNavItem.removeClass("d-none");
        } catch (error) {
          console.error("Error decoding JWT token:", error);
        }
      }
    </script>
  </body>
</html>
